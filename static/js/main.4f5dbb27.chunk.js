(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);a(10);var n=a(0),o=a.n(n),c=a(7),i=a.n(c),s=(a(15),a(8)),l=a(1),r=a(2),m=a(3),u=a(4),p=a(5),v=a.n(p),d=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getButtonClassnames=function(){return v()({btn:!0,"btn-success":n.state.willWatch,"btn-secondary":!n.state.willWatch})},n.getButtonTitle=function(){return n.state.willWatch?"Remove will Watch":"Add will Watch"},n.handleClick=function(){var e=n.props,t=e.movie,a=e.removeMovieToWillWatch,o=e.addMovieToWillWatch,c=!n.state.willWatch;c?o(t):a(t),n.setState({willWatch:c})},n.state={willWatch:!1},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.movie,a=e.removeMovie;return o.a.createElement("div",{className:"card"},o.a.createElement("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(t.backdrop_path),alt:""}),o.a.createElement("div",{className:"card-body"},o.a.createElement("h6",{className:"card-title"},t.title),o.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},o.a.createElement("p",{className:"mb-0"},"Rating: ",t.vote_average),o.a.createElement("button",{type:"button",className:this.getButtonClassnames(),onClick:this.handleClick},this.getButtonTitle())),o.a.createElement("button",{type:"button",onClick:function(){return a(t)}},"Delete movie")))}}]),a}(o.a.Component),h=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(t){return function(a){e.props.updateSortBy(t)}},e.getClassLink=function(t){return v()({"nav-link":!0,active:e.props.sort_by===t})},e}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.sort_by!==e.sort_by}},{key:"render",value:function(){return console.log("MovieTabs render"),o.a.createElement("ul",{className:"tabs nav nav-pills"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:this.getClassLink("popularity.desc"),onClick:this.handleClick("popularity.desc")},"Popularity desc")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:this.getClassLink("revenue.desc"),onClick:this.handleClick("revenue.desc")},"Revenue desc")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:this.getClassLink("vote_average.desc"),onClick:this.handleClick("vote_average.desc")},"Vote average desc")))}}]),a}(o.a.Component),g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.page,a=e.total_pages,n=e.pageUp,c=e.pageDown;return o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return c()}},"\u041d\u0430\u0437\u0430\u0434"),o.a.createElement("span",{className:"m-2"},"".concat(t," from ").concat(a)),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return n()}},"\u0412\u043f\u0435\u0440\u0435\u0434"))}}]),a}(o.a.Component),f=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).removeMovie=function(e){var t=n.state.movies.filter((function(t){return t.id!==e.id}));n.setState({movies:t})},n.addMovieToWillWatch=function(e){var t=[].concat(Object(s.a)(n.state.moviesWillWatch),[e]);n.setState({moviesWillWatch:t})},n.removeMovieToWillWatch=function(e){var t=n.state.moviesWillWatch.filter((function(t){return t.id!==e.id}));n.setState({moviesWillWatch:t})},n.updateSortBy=function(e){n.setState({sort_by:e})},n.pageUp=function(){n.state.page<n.state.total_pages&&n.setState((function(e,t){return{page:e.page+1}}))},n.pageDown=function(){n.state.page>1&&n.setState((function(e,t){return{page:e.page-1}}))},n.getMovies=function(){fetch("https://api.themoviedb.org/3/discover/movie?api_key=".concat("3f4ca4f3a9750da53450646ced312397","&sort_by=").concat(n.state.sort_by,"&page=").concat(n.state.page)).then((function(e){return e.json()})).then((function(e){n.setState({movies:e.results,page:e.page,total_pages:e.total_pages})}))},n.state={movies:[],moviesWillWatch:[],sort_by:"popularity.desc",page:1,total_pages:0},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getMovies()}},{key:"componentDidUpdate",value:function(e,t){t.sort_by===this.state.sort_by&&t.page===this.state.page||(console.log("App didUpdate"),this.getMovies())}},{key:"render",value:function(){var e=this;return console.log("App render"),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-9"},o.a.createElement("div",{className:"row mb-4"},o.a.createElement("div",{className:"col-12"},o.a.createElement(h,{sort_by:this.state.sort_by,updateSortBy:this.updateSortBy}))),o.a.createElement("div",{className:"row"},this.state.movies.map((function(t){return o.a.createElement("div",{key:t.id,className:"col-6 mb-4"},o.a.createElement(d,{movie:t,removeMovie:e.removeMovie,addMovieToWillWatch:e.addMovieToWillWatch,removeMovieToWillWatch:e.removeMovieToWillWatch}))})))),o.a.createElement("div",{className:"col-3"},o.a.createElement("h4",null,"Will Watch: ",this.state.moviesWillWatch.length," movies"),o.a.createElement("ul",{className:"list-group"},this.state.moviesWillWatch.map((function(e){return o.a.createElement("li",{key:e.id,className:"list-group-item"},o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("p",null,e.title),o.a.createElement("p",null,e.vote_average)))})))),o.a.createElement("div",{className:"row mb-4 container-fluid d-flex justify-content-center"},o.a.createElement(g,{page:this.state.page,total_pages:this.state.total_pages,pageUp:this.pageUp,pageDown:this.pageDown}))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.4f5dbb27.chunk.js.map